<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NeuroXercise - Entrena tu Mente</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap');

  :root {
    --primary: #6C63FF;
    --primary-dark: #5A52D5;
    --secondary: #FF6584;
    --accent: #43E97B;
    --bg-dark: #0F0E17;
    --bg-card: #1A1932;
    --bg-card-hover: #232147;
    --text-primary: #FFFFFE;
    --text-secondary: #A7A9BE;
    --gradient-1: linear-gradient(135deg, #6C63FF 0%, #43E97B 100%);
    --gradient-2: linear-gradient(135deg, #FF6584 0%, #6C63FF 100%);
    --gradient-3: linear-gradient(135deg, #43E97B 0%, #38F9D7 100%);
    --shadow: 0 8px 32px rgba(108, 99, 255, 0.15);
    --shadow-hover: 0 12px 40px rgba(108, 99, 255, 0.25);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Poppins', sans-serif;
    background: var(--bg-dark);
    color: var(--text-primary);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Animated background */
  .bg-animation {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 0;
    pointer-events: none;
    overflow: hidden;
  }
  .bg-animation .circle {
    position: absolute;
    border-radius: 50%;
    opacity: 0.06;
    animation: float 20s infinite ease-in-out;
  }
  .bg-animation .circle:nth-child(1) {
    width: 600px; height: 600px;
    background: var(--primary);
    top: -200px; left: -200px;
    animation-delay: 0s;
  }
  .bg-animation .circle:nth-child(2) {
    width: 400px; height: 400px;
    background: var(--secondary);
    bottom: -100px; right: -100px;
    animation-delay: -5s;
  }
  .bg-animation .circle:nth-child(3) {
    width: 300px; height: 300px;
    background: var(--accent);
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    animation-delay: -10s;
  }

  @keyframes float {
    0%, 100% { transform: translate(0, 0) scale(1); }
    25% { transform: translate(50px, -50px) scale(1.1); }
    50% { transform: translate(-30px, 60px) scale(0.95); }
    75% { transform: translate(40px, 30px) scale(1.05); }
  }

  /* Navigation */
  .navbar {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 100;
    background: rgba(15, 14, 23, 0.85);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid rgba(108, 99, 255, 0.1);
    padding: 0 2rem;
    height: 70px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .logo {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.5rem;
    font-weight: 700;
    cursor: pointer;
  }
  .logo .brain-icon {
    width: 40px; height: 40px;
    background: var(--gradient-1);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.3rem;
  }
  .logo span { background: var(--gradient-1); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  .nav-links { display: flex; gap: 8px; }
  .nav-links button {
    background: none;
    border: 1px solid transparent;
    color: var(--text-secondary);
    font-family: inherit;
    font-size: 0.9rem;
    padding: 8px 16px;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s;
  }
  .nav-links button:hover, .nav-links button.active {
    color: var(--text-primary);
    background: rgba(108, 99, 255, 0.1);
    border-color: rgba(108, 99, 255, 0.3);
  }

  /* Main content */
  .main { position: relative; z-index: 1; padding-top: 70px; }
  .container { max-width: 1100px; margin: 0 auto; padding: 2rem; }

  /* Hero */
  .hero {
    text-align: center;
    padding: 4rem 0 3rem;
    animation: fadeInUp 0.8s ease;
  }
  .hero-badge {
    display: inline-block;
    padding: 6px 16px;
    background: rgba(108, 99, 255, 0.15);
    border: 1px solid rgba(108, 99, 255, 0.3);
    border-radius: 50px;
    font-size: 0.8rem;
    color: var(--primary);
    margin-bottom: 1.5rem;
    letter-spacing: 1px;
    text-transform: uppercase;
  }
  .hero h1 {
    font-size: clamp(2rem, 5vw, 3.2rem);
    font-weight: 800;
    line-height: 1.2;
    margin-bottom: 1rem;
  }
  .hero h1 .highlight {
    background: var(--gradient-1);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  .hero p {
    font-size: 1.1rem;
    color: var(--text-secondary);
    max-width: 600px;
    margin: 0 auto 2rem;
    line-height: 1.7;
  }
  .hero-cta {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 14px 32px;
    background: var(--gradient-1);
    color: white;
    font-family: inherit;
    font-size: 1rem;
    font-weight: 600;
    border: none;
    border-radius: 14px;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 4px 20px rgba(108, 99, 255, 0.4);
  }
  .hero-cta:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 30px rgba(108, 99, 255, 0.5);
  }

  /* Stats bar */
  .stats-bar {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin: 2rem 0 3rem;
  }
  .stat-item {
    text-align: center;
    padding: 1.5rem;
    background: var(--bg-card);
    border-radius: 16px;
    border: 1px solid rgba(108, 99, 255, 0.1);
  }
  .stat-number {
    font-size: 2rem;
    font-weight: 700;
    background: var(--gradient-1);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }
  .stat-label { font-size: 0.85rem; color: var(--text-secondary); margin-top: 4px; }

  /* Section titles */
  .section-title {
    font-size: 1.8rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
  }
  .section-subtitle {
    color: var(--text-secondary);
    margin-bottom: 2rem;
    font-size: 1rem;
  }

  /* Game cards grid */
  .games-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-bottom: 3rem;
  }
  .game-card {
    background: var(--bg-card);
    border-radius: 20px;
    padding: 2rem;
    border: 1px solid rgba(108, 99, 255, 0.1);
    cursor: pointer;
    transition: all 0.3s;
    position: relative;
    overflow: hidden;
  }
  .game-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 4px;
    border-radius: 20px 20px 0 0;
  }
  .game-card:nth-child(1)::before { background: var(--gradient-1); }
  .game-card:nth-child(2)::before { background: var(--gradient-2); }
  .game-card:nth-child(3)::before { background: var(--gradient-3); }
  .game-card:hover {
    transform: translateY(-4px);
    border-color: rgba(108, 99, 255, 0.3);
    box-shadow: var(--shadow-hover);
  }
  .game-card .icon-wrapper {
    width: 60px; height: 60px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8rem;
    margin-bottom: 1rem;
  }
  .game-card:nth-child(1) .icon-wrapper { background: rgba(108, 99, 255, 0.15); }
  .game-card:nth-child(2) .icon-wrapper { background: rgba(255, 101, 132, 0.15); }
  .game-card:nth-child(3) .icon-wrapper { background: rgba(67, 233, 123, 0.15); }
  .game-card h3 { font-size: 1.2rem; margin-bottom: 0.5rem; }
  .game-card p { color: var(--text-secondary); font-size: 0.9rem; line-height: 1.6; margin-bottom: 1rem; }
  .game-card .difficulty {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 8px;
    font-size: 0.75rem;
    font-weight: 500;
  }
  .diff-easy { background: rgba(67, 233, 123, 0.15); color: var(--accent); }
  .diff-medium { background: rgba(108, 99, 255, 0.15); color: var(--primary); }
  .diff-hard { background: rgba(255, 101, 132, 0.15); color: var(--secondary); }
  .play-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    margin-top: 1rem;
    padding: 10px 20px;
    border-radius: 12px;
    border: none;
    font-family: inherit;
    font-size: 0.9rem;
    font-weight: 600;
    color: white;
    cursor: pointer;
    transition: all 0.3s;
  }
  .game-card:nth-child(1) .play-btn { background: var(--primary); }
  .game-card:nth-child(2) .play-btn { background: var(--secondary); }
  .game-card:nth-child(3) .play-btn { background: #2dd4a0; }
  .play-btn:hover { transform: scale(1.05); }

  /* Game Area */
  .game-area {
    background: var(--bg-card);
    border-radius: 24px;
    border: 1px solid rgba(108, 99, 255, 0.15);
    padding: 2.5rem;
    min-height: 500px;
    display: none;
    animation: fadeInUp 0.5s ease;
  }
  .game-area.active { display: block; }
  .game-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    gap: 1rem;
  }
  .game-header h2 { font-size: 1.5rem; }
  .game-info {
    display: flex;
    gap: 1.5rem;
    align-items: center;
  }
  .game-info-item {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.95rem;
  }
  .game-info-item .label { color: var(--text-secondary); }
  .game-info-item .value { font-weight: 600; color: var(--primary); }
  .back-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 16px;
    background: rgba(108, 99, 255, 0.1);
    border: 1px solid rgba(108, 99, 255, 0.2);
    color: var(--text-primary);
    border-radius: 10px;
    font-family: inherit;
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.3s;
  }
  .back-btn:hover { background: rgba(108, 99, 255, 0.2); }

  /* Memory Game */
  .memory-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    max-width: 500px;
    margin: 0 auto;
  }
  .memory-card {
    aspect-ratio: 1;
    background: var(--bg-dark);
    border: 2px solid rgba(108, 99, 255, 0.15);
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.2rem;
    cursor: pointer;
    transition: all 0.4s;
    user-select: none;
    position: relative;
  }
  .memory-card .card-back {
    position: absolute;
    width: 100%; height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    color: var(--primary);
    opacity: 0.4;
  }
  .memory-card .card-front {
    display: none;
  }
  .memory-card.flipped {
    background: rgba(108, 99, 255, 0.15);
    border-color: var(--primary);
    transform: scale(1.05);
  }
  .memory-card.flipped .card-back { display: none; }
  .memory-card.flipped .card-front { display: flex; }
  .memory-card.matched {
    background: rgba(67, 233, 123, 0.15);
    border-color: var(--accent);
    transform: scale(1);
    cursor: default;
  }
  .memory-card:not(.flipped):not(.matched):hover {
    border-color: rgba(108, 99, 255, 0.4);
    transform: scale(1.03);
  }

  /* Pattern Game */
  .pattern-container { text-align: center; }
  .pattern-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
    max-width: 350px;
    margin: 1.5rem auto;
  }
  .pattern-cell {
    aspect-ratio: 1;
    background: var(--bg-dark);
    border: 2px solid rgba(108, 99, 255, 0.15);
    border-radius: 16px;
    cursor: pointer;
    transition: all 0.3s;
  }
  .pattern-cell.active {
    background: var(--primary);
    border-color: var(--primary);
    box-shadow: 0 0 20px rgba(108, 99, 255, 0.5);
  }
  .pattern-cell.selected {
    background: rgba(108, 99, 255, 0.3);
    border-color: var(--primary);
  }
  .pattern-cell.correct {
    background: rgba(67, 233, 123, 0.3);
    border-color: var(--accent);
  }
  .pattern-cell.wrong {
    background: rgba(255, 101, 132, 0.3);
    border-color: var(--secondary);
  }
  .pattern-cell:not(.active):hover {
    border-color: rgba(108, 99, 255, 0.4);
  }
  .pattern-message {
    font-size: 1.1rem;
    color: var(--text-secondary);
    margin: 1rem 0;
    min-height: 30px;
  }
  .pattern-level {
    font-size: 0.9rem;
    color: var(--primary);
    font-weight: 600;
  }

  /* Sequence Game */
  .sequence-container { text-align: center; }
  .sequence-display {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin: 2rem 0;
    flex-wrap: wrap;
  }
  .seq-color-btn {
    width: 100px;
    height: 100px;
    border-radius: 20px;
    border: 3px solid transparent;
    cursor: pointer;
    transition: all 0.3s;
    opacity: 0.5;
  }
  .seq-color-btn.lit {
    opacity: 1;
    transform: scale(1.1);
    box-shadow: 0 0 30px currentColor;
  }
  .seq-color-btn:hover { opacity: 0.8; }
  .seq-red { background: #FF6584; color: #FF6584; }
  .seq-blue { background: #6C63FF; color: #6C63FF; }
  .seq-green { background: #43E97B; color: #43E97B; }
  .seq-yellow { background: #FFD93D; color: #FFD93D; }
  .seq-message {
    font-size: 1.1rem;
    color: var(--text-secondary);
    margin: 1rem 0;
    min-height: 30px;
  }

  /* Info Section */
  .info-section {
    padding: 3rem 0;
  }
  .info-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
  }
  .info-card {
    background: var(--bg-card);
    border-radius: 20px;
    padding: 2rem;
    border: 1px solid rgba(108, 99, 255, 0.1);
    transition: all 0.3s;
  }
  .info-card:hover {
    border-color: rgba(108, 99, 255, 0.3);
    transform: translateY(-2px);
  }
  .info-card .info-icon {
    width: 50px; height: 50px;
    border-radius: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    margin-bottom: 1rem;
    background: rgba(108, 99, 255, 0.1);
  }
  .info-card h3 { font-size: 1.1rem; margin-bottom: 0.7rem; }
  .info-card p { color: var(--text-secondary); font-size: 0.9rem; line-height: 1.7; }

  /* Progress Section */
  .progress-section {
    background: var(--bg-card);
    border-radius: 24px;
    padding: 2.5rem;
    border: 1px solid rgba(108, 99, 255, 0.1);
    margin: 2rem 0;
  }
  .progress-bars { display: flex; flex-direction: column; gap: 1.5rem; margin-top: 1.5rem; }
  .progress-item label {
    display: flex;
    justify-content: space-between;
    margin-bottom: 8px;
    font-size: 0.9rem;
  }
  .progress-item label span:last-child { color: var(--primary); font-weight: 600; }
  .progress-bar {
    height: 10px;
    background: rgba(108, 99, 255, 0.1);
    border-radius: 10px;
    overflow: hidden;
  }
  .progress-fill {
    height: 100%;
    border-radius: 10px;
    transition: width 1s ease;
  }
  .progress-fill.mem { background: var(--gradient-1); }
  .progress-fill.pat { background: var(--gradient-2); }
  .progress-fill.seq { background: var(--gradient-3); }

  /* Results modal */
  .modal-overlay {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.7);
    backdrop-filter: blur(8px);
    z-index: 200;
    align-items: center;
    justify-content: center;
  }
  .modal-overlay.active { display: flex; }
  .modal {
    background: var(--bg-card);
    border-radius: 24px;
    padding: 3rem;
    max-width: 420px;
    width: 90%;
    text-align: center;
    border: 1px solid rgba(108, 99, 255, 0.2);
    box-shadow: 0 20px 60px rgba(0,0,0,0.5);
    animation: fadeInUp 0.4s ease;
  }
  .modal .result-icon {
    width: 80px; height: 80px;
    border-radius: 50%;
    margin: 0 auto 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
  }
  .modal .result-icon.success { background: rgba(67, 233, 123, 0.15); }
  .modal .result-icon.try-again { background: rgba(255, 101, 132, 0.15); }
  .modal h3 { font-size: 1.5rem; margin-bottom: 0.5rem; }
  .modal p { color: var(--text-secondary); margin-bottom: 1.5rem; line-height: 1.6; }
  .modal .score-display {
    font-size: 2.5rem;
    font-weight: 800;
    background: var(--gradient-1);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 1rem;
  }
  .modal-actions { display: flex; gap: 12px; justify-content: center; }
  .modal-btn {
    padding: 12px 24px;
    border-radius: 12px;
    font-family: inherit;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    border: none;
  }
  .modal-btn.primary { background: var(--primary); color: white; }
  .modal-btn.secondary { background: rgba(108, 99, 255, 0.1); color: var(--text-primary); border: 1px solid rgba(108,99,255,0.2); }
  .modal-btn:hover { transform: scale(1.05); }

  /* Animations */
  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Footer */
  .footer {
    text-align: center;
    padding: 2rem;
    color: var(--text-secondary);
    font-size: 0.8rem;
    border-top: 1px solid rgba(108, 99, 255, 0.1);
    margin-top: 3rem;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .container { padding: 1rem; }
    .game-area { padding: 1.5rem; }
    .memory-grid { grid-template-columns: repeat(4, 1fr); gap: 8px; }
    .seq-color-btn { width: 70px; height: 70px; }
    .navbar { padding: 0 1rem; }
    .nav-links button { padding: 6px 10px; font-size: 0.8rem; }
    .game-header { flex-direction: column; align-items: flex-start; }
  }

  /* Page transitions */
  .page { display: none; animation: fadeInUp 0.5s ease; }
  .page.active { display: block; }

  /* Tooltip */
  .brain-benefit {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 14px;
    background: rgba(67, 233, 123, 0.1);
    border: 1px solid rgba(67, 233, 123, 0.2);
    border-radius: 10px;
    font-size: 0.8rem;
    color: var(--accent);
    margin: 4px;
  }

  .start-game-btn {
    padding: 14px 40px;
    background: var(--gradient-1);
    color: white;
    border: none;
    border-radius: 14px;
    font-family: inherit;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    margin-top: 1rem;
  }
  .start-game-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 30px rgba(108, 99, 255, 0.4);
  }

  .timer-bar {
    width: 100%;
    height: 6px;
    background: rgba(108, 99, 255, 0.1);
    border-radius: 6px;
    margin: 1rem 0;
    overflow: hidden;
  }
  .timer-fill {
    height: 100%;
    background: var(--gradient-1);
    border-radius: 6px;
    transition: width 0.1s linear;
  }
</style>
</head>
<body>

<div class="bg-animation">
  <div class="circle"></div>
  <div class="circle"></div>
  <div class="circle"></div>
</div>

<nav class="navbar">
  <div class="logo" onclick="showPage('home')">
    <div class="brain-icon">üß†</div>
    <span>NeuroXercise</span>
  </div>
  <div class="nav-links">
    <button class="active" onclick="showPage('home')" id="nav-home">Inicio</button>
    <button onclick="showPage('games')" id="nav-games">Juegos</button>
    <button onclick="showPage('learn')" id="nav-learn">Aprende</button>
    <button onclick="showPage('progress')" id="nav-progress">Progreso</button>
  </div>
</nav>

<main class="main">
  <div class="container">

    <!-- HOME PAGE -->
    <div class="page active" id="page-home">
      <div class="hero">
        <div class="hero-badge">üß¨ Proyecto de Ciencias de la Salud</div>
        <h1>Entrena tu cerebro.<br><span class="highlight">Protege tu futuro.</span></h1>
        <p>Ejercicios cognitivos dise√±ados para fortalecer la memoria, la atenci√≥n y las conexiones neuronales. La ciencia muestra que mantener el cerebro activo puede ayudar a reducir el riesgo de Alzheimer.</p>
        <button class="hero-cta" onclick="showPage('games')">
          Comenzar entrenamiento ‚ñ∏
        </button>
      </div>

      <div class="stats-bar" id="stats-bar">
        <div class="stat-item">
          <div class="stat-number" id="stat-games">0</div>
          <div class="stat-label">Juegos completados</div>
        </div>
        <div class="stat-item">
          <div class="stat-number" id="stat-score">0</div>
          <div class="stat-label">Puntos totales</div>
        </div>
        <div class="stat-item">
          <div class="stat-number" id="stat-streak">0</div>
          <div class="stat-label">Racha actual</div>
        </div>
        <div class="stat-item">
          <div class="stat-number" id="stat-best">0</div>
          <div class="stat-label">Mejor puntuaci√≥n</div>
        </div>
      </div>

      <h2 class="section-title">¬øPor qu√© entrenar tu mente?</h2>
      <p class="section-subtitle">La evidencia cient√≠fica respalda los beneficios del entrenamiento cognitivo</p>
      <div class="info-cards">
        <div class="info-card">
          <div class="info-icon">üî¨</div>
          <h3>Neuroplasticidad</h3>
          <p>Tu cerebro puede crear nuevas conexiones neuronales a cualquier edad. Los ejercicios cognitivos estimulan esta capacidad, fortaleciendo las redes que procesan memoria y aprendizaje.</p>
        </div>
        <div class="info-card">
          <div class="info-icon">üõ°Ô∏è</div>
          <h3>Reserva Cognitiva</h3>
          <p>Mantener el cerebro activo construye una "reserva cognitiva" que puede ayudar a compensar los cambios cerebrales relacionados con el envejecimiento y enfermedades neurodegenerativas.</p>
        </div>
        <div class="info-card">
          <div class="info-icon">üìä</div>
          <h3>Datos que importan</h3>
          <p>Estudios sugieren que las personas que realizan actividades cognitivas regularmente pueden tener un riesgo significativamente menor de desarrollar demencia en comparaci√≥n con quienes no las realizan.</p>
        </div>
      </div>
    </div>

    <!-- GAMES PAGE -->
    <div class="page" id="page-games">
      <div id="games-menu">
        <h2 class="section-title" style="margin-top:2rem;">Elige tu entrenamiento</h2>
        <p class="section-subtitle">Cada juego ejercita diferentes √°reas cognitivas asociadas a la prevenci√≥n del Alzheimer</p>
        <div class="games-grid">
          <div class="game-card" onclick="startGame('memory')">
            <div class="icon-wrapper">üÉè</div>
            <h3>Pares de Memoria</h3>
            <p>Encuentra las parejas de cartas ocultas. Ejercita la memoria de trabajo y el reconocimiento de patrones visuales.</p>
            <div>
              <span class="brain-benefit">üß† Memoria de trabajo</span>
              <span class="brain-benefit">üëÅÔ∏è Atenci√≥n visual</span>
            </div>
            <span class="difficulty diff-easy">Nivel: Progresivo</span>
            <br>
            <button class="play-btn">Jugar ‚ñ∏</button>
          </div>
          <div class="game-card" onclick="startGame('pattern')">
            <div class="icon-wrapper">üî≤</div>
            <h3>Patr√≥n Espacial</h3>
            <p>Memoriza y reproduce patrones que aparecen en la cuadr√≠cula. Fortalece la memoria espacial y secuencial.</p>
            <div>
              <span class="brain-benefit">üìê Memoria espacial</span>
              <span class="brain-benefit">üîÑ Secuenciaci√≥n</span>
            </div>
            <span class="difficulty diff-medium">Nivel: Adaptativo</span>
            <br>
            <button class="play-btn">Jugar ‚ñ∏</button>
          </div>
          <div class="game-card" onclick="startGame('sequence')">
            <div class="icon-wrapper">üé®</div>
            <h3>Secuencia de Colores</h3>
            <p>Repite secuencias de colores cada vez m√°s largas. Estimula la memoria a corto plazo y la concentraci√≥n.</p>
            <div>
              <span class="brain-benefit">üéØ Concentraci√≥n</span>
              <span class="brain-benefit">üìù Memoria secuencial</span>
            </div>
            <span class="difficulty diff-hard">Nivel: Desafiante</span>
            <br>
            <button class="play-btn">Jugar ‚ñ∏</button>
          </div>
        </div>
      </div>

      <!-- MEMORY GAME AREA -->
      <div class="game-area" id="game-memory">
        <div class="game-header">
          <div>
            <button class="back-btn" onclick="backToMenu()">‚Üê Volver</button>
            <h2 style="margin-top:0.5rem;">üÉè Pares de Memoria</h2>
          </div>
          <div class="game-info">
            <div class="game-info-item">
              <span class="label">Movimientos:</span>
              <span class="value" id="memory-moves">0</span>
            </div>
            <div class="game-info-item">
              <span class="label">Pares:</span>
              <span class="value" id="memory-pairs">0/8</span>
            </div>
            <div class="game-info-item">
              <span class="label">Tiempo:</span>
              <span class="value" id="memory-time">0:00</span>
            </div>
          </div>
        </div>
        <div class="memory-grid" id="memory-grid"></div>
      </div>

      <!-- PATTERN GAME AREA -->
      <div class="game-area" id="game-pattern">
        <div class="game-header">
          <div>
            <button class="back-btn" onclick="backToMenu()">‚Üê Volver</button>
            <h2 style="margin-top:0.5rem;">üî≤ Patr√≥n Espacial</h2>
          </div>
          <div class="game-info">
            <div class="game-info-item">
              <span class="label">Nivel:</span>
              <span class="value" id="pattern-level">1</span>
            </div>
            <div class="game-info-item">
              <span class="label">Puntos:</span>
              <span class="value" id="pattern-score">0</span>
            </div>
          </div>
        </div>
        <div class="pattern-container">
          <p class="pattern-message" id="pattern-msg">Presiona "Iniciar" para comenzar</p>
          <div class="pattern-grid" id="pattern-grid">
            <div class="pattern-cell" data-idx="0"></div>
            <div class="pattern-cell" data-idx="1"></div>
            <div class="pattern-cell" data-idx="2"></div>
            <div class="pattern-cell" data-idx="3"></div>
            <div class="pattern-cell" data-idx="4"></div>
            <div class="pattern-cell" data-idx="5"></div>
            <div class="pattern-cell" data-idx="6"></div>
            <div class="pattern-cell" data-idx="7"></div>
            <div class="pattern-cell" data-idx="8"></div>
          </div>
          <button class="start-game-btn" id="pattern-start-btn" onclick="startPatternRound()">Iniciar</button>
        </div>
      </div>

      <!-- SEQUENCE GAME AREA -->
      <div class="game-area" id="game-sequence">
        <div class="game-header">
          <div>
            <button class="back-btn" onclick="backToMenu()">‚Üê Volver</button>
            <h2 style="margin-top:0.5rem;">üé® Secuencia de Colores</h2>
          </div>
          <div class="game-info">
            <div class="game-info-item">
              <span class="label">Ronda:</span>
              <span class="value" id="seq-round">0</span>
            </div>
            <div class="game-info-item">
              <span class="label">Puntos:</span>
              <span class="value" id="seq-score">0</span>
            </div>
          </div>
        </div>
        <div class="sequence-container">
          <p class="seq-message" id="seq-msg">Presiona "Iniciar" para comenzar</p>
          <div class="sequence-display">
            <div class="seq-color-btn seq-red" data-color="red" onclick="seqPlayerInput('red')"></div>
            <div class="seq-color-btn seq-blue" data-color="blue" onclick="seqPlayerInput('blue')"></div>
            <div class="seq-color-btn seq-green" data-color="green" onclick="seqPlayerInput('green')"></div>
            <div class="seq-color-btn seq-yellow" data-color="yellow" onclick="seqPlayerInput('yellow')"></div>
          </div>
          <button class="start-game-btn" id="seq-start-btn" onclick="startSequenceGame()">Iniciar</button>
        </div>
      </div>
    </div>

    <!-- LEARN PAGE -->
    <div class="page" id="page-learn">
      <div style="margin-top:2rem;">
        <h2 class="section-title">Aprende sobre el Alzheimer</h2>
        <p class="section-subtitle">Conocimiento es poder: entiende la enfermedad y c√≥mo proteger tu cerebro</p>

        <div class="info-cards" style="margin-bottom:2rem;">
          <div class="info-card">
            <div class="info-icon">üß©</div>
            <h3>¬øQu√© es el Alzheimer?</h3>
            <p>El Alzheimer es una enfermedad neurodegenerativa progresiva que afecta la memoria, el pensamiento y el comportamiento. Es la causa m√°s com√∫n de demencia, representando entre el 60-80% de los casos. Afecta a millones de personas en todo el mundo y su prevalencia aumenta con la edad.</p>
          </div>
          <div class="info-card">
            <div class="info-icon">‚öôÔ∏è</div>
            <h3>¬øQu√© pasa en el cerebro?</h3>
            <p>En el Alzheimer se acumulan prote√≠nas anormales (placas de beta-amiloide y ovillos de tau) que da√±an y destruyen las neuronas. Esto comienza en el hipocampo (centro de la memoria) y se extiende gradualmente a otras √°reas del cerebro, afectando m√°s funciones con el tiempo.</p>
          </div>
          <div class="info-card">
            <div class="info-icon">‚ö†Ô∏è</div>
            <h3>Factores de riesgo</h3>
            <p>La edad es el mayor factor de riesgo, pero hay otros factores modificables: sedentarismo, aislamiento social, falta de estimulaci√≥n mental, mala alimentaci√≥n, problemas cardiovasculares, falta de sue√±o adecuado, y el tabaquismo. ¬°Muchos de estos factores est√°n bajo tu control!</p>
          </div>
        </div>

        <div class="progress-section">
          <h3 class="section-title" style="font-size:1.4rem;">üõ°Ô∏è C√≥mo proteger tu cerebro</h3>
          <div class="info-cards" style="margin-top:1.5rem;">
            <div class="info-card" style="border-left: 3px solid var(--primary);">
              <h3>üèãÔ∏è Ejercicio f√≠sico</h3>
              <p>El ejercicio aer√≥bico regular aumenta el flujo sangu√≠neo al cerebro, promueve el crecimiento de nuevas neuronas y reduce la inflamaci√≥n. Se recomienda al menos 150 minutos de actividad moderada por semana.</p>
            </div>
            <div class="info-card" style="border-left: 3px solid var(--secondary);">
              <h3>üß† Estimulaci√≥n mental</h3>
              <p>Actividades que desaf√≠an al cerebro como puzzles, aprender idiomas, tocar instrumentos musicales o juegos de memoria fortalecen las conexiones neuronales y construyen reserva cognitiva.</p>
            </div>
            <div class="info-card" style="border-left: 3px solid var(--accent);">
              <h3>üë• Conexi√≥n social</h3>
              <p>Mantener relaciones sociales activas protege contra el deterioro cognitivo. La interacci√≥n social estimula m√∫ltiples √°reas cerebrales simult√°neamente y reduce el estr√©s cr√≥nico que da√±a las neuronas.</p>
            </div>
            <div class="info-card" style="border-left: 3px solid #FFD93D;">
              <h3>ü•ó Alimentaci√≥n saludable</h3>
              <p>La dieta mediterr√°nea y la dieta MIND, ricas en frutas, verduras, pescado y grasas saludables, se han asociado con un menor riesgo de deterioro cognitivo. Los antioxidantes y omega-3 son especialmente beneficiosos.</p>
            </div>
            <div class="info-card" style="border-left: 3px solid #38F9D7;">
              <h3>üò¥ Sue√±o de calidad</h3>
              <p>Durante el sue√±o profundo, el cerebro elimina toxinas, incluyendo la prote√≠na beta-amiloide. Dormir 7-9 horas de calidad cada noche es fundamental para la salud cerebral a largo plazo.</p>
            </div>
            <div class="info-card" style="border-left: 3px solid #FF9A9E;">
              <h3>üßò Manejo del estr√©s</h3>
              <p>El estr√©s cr√≥nico eleva el cortisol, que puede da√±ar el hipocampo. Pr√°cticas como meditaci√≥n, yoga, respiraci√≥n profunda y hobbies relajantes ayudan a proteger la salud cerebral.</p>
            </div>
          </div>
        </div>

        <div class="progress-section" style="margin-top:2rem; text-align:center;">
          <h3 style="font-size:1.3rem; margin-bottom:1rem;">¬øSab√≠as que...?</h3>
          <p style="color:var(--text-secondary); font-size:1.05rem; line-height:1.8; max-width:700px; margin:0 auto;">
            Nunca es demasiado temprano para cuidar tu cerebro. Los h√°bitos que desarrollas ahora ‚Äî como hacer ejercicio, dormir bien, socializar y desafiar tu mente ‚Äî pueden marcar la diferencia d√©cadas despu√©s. ¬°Tu futuro yo te lo agradecer√°!
          </p>
          <button class="hero-cta" style="margin-top:1.5rem;" onclick="showPage('games')">
            ¬°Empieza a entrenar! ‚ñ∏
          </button>
        </div>
      </div>
    </div>

    <!-- PROGRESS PAGE -->
    <div class="page" id="page-progress">
      <div style="margin-top:2rem;">
        <h2 class="section-title">Tu progreso</h2>
        <p class="section-subtitle">Observa c√≥mo mejoran tus habilidades cognitivas con la pr√°ctica</p>

        <div class="stats-bar">
          <div class="stat-item">
            <div class="stat-number" id="prog-total-games">0</div>
            <div class="stat-label">Juegos jugados</div>
          </div>
          <div class="stat-item">
            <div class="stat-number" id="prog-total-points">0</div>
            <div class="stat-label">Puntos totales</div>
          </div>
          <div class="stat-item">
            <div class="stat-number" id="prog-best-streak">0</div>
            <div class="stat-label">Mejor racha</div>
          </div>
          <div class="stat-item">
            <div class="stat-number" id="prog-brain-level">Principiante</div>
            <div class="stat-label">Nivel cerebral</div>
          </div>
        </div>

        <div class="progress-section">
          <h3 style="font-size:1.2rem;">Habilidades cognitivas</h3>
          <div class="progress-bars">
            <div class="progress-item">
              <label><span>üÉè Memoria de trabajo</span><span id="prog-mem-pct">0%</span></label>
              <div class="progress-bar"><div class="progress-fill mem" id="prog-mem-bar" style="width:0%"></div></div>
            </div>
            <div class="progress-item">
              <label><span>üî≤ Memoria espacial</span><span id="prog-pat-pct">0%</span></label>
              <div class="progress-bar"><div class="progress-fill pat" id="prog-pat-bar" style="width:0%"></div></div>
            </div>
            <div class="progress-item">
              <label><span>üé® Memoria secuencial</span><span id="prog-seq-pct">0%</span></label>
              <div class="progress-bar"><div class="progress-fill seq" id="prog-seq-bar" style="width:0%"></div></div>
            </div>
          </div>
        </div>

        <div class="progress-section" style="text-align:center;">
          <h3 style="font-size:1.2rem; margin-bottom:0.5rem;">üìà Historial reciente</h3>
          <div id="history-list" style="margin-top:1rem;">
            <p style="color:var(--text-secondary);">Juega algunos juegos para ver tu historial aqu√≠</p>
          </div>
        </div>
      </div>
    </div>

  </div>
</main>

<!-- Result Modal -->
<div class="modal-overlay" id="result-modal">
  <div class="modal">
    <div class="result-icon" id="modal-icon">üéâ</div>
    <h3 id="modal-title">¬°Excelente!</h3>
    <div class="score-display" id="modal-score">100</div>
    <p id="modal-msg">Has completado el ejercicio</p>
    <p id="modal-brain-tip" style="font-size:0.85rem; color:var(--accent); margin-bottom:1rem;"></p>
    <div class="modal-actions">
      <button class="modal-btn secondary" onclick="closeModal(); backToMenu();">Men√∫</button>
      <button class="modal-btn primary" id="modal-replay-btn" onclick="closeModal();">Jugar de nuevo</button>
    </div>
  </div>
</div>

<footer class="footer">
  <p>NeuroXercise ‚Äî Proyecto educativo sobre prevenci√≥n del Alzheimer</p>
  <p style="margin-top:4px; opacity:0.6;">Creado como proyecto de ciencias de la salud ¬∑ La informaci√≥n presentada es con fines educativos</p>
</footer>

<script>
// ===== APP STATE =====
const state = {
  totalGames: 0,
  totalScore: 0,
  streak: 0,
  bestScore: 0,
  bestStreak: 0,
  memoryBest: 0,
  patternBest: 0,
  sequenceBest: 0,
  history: []
};

const brainTips = [
  "üí° El hipocampo, centro de la memoria, puede generar nuevas neuronas durante toda la vida.",
  "üí° Dormir bien ayuda al cerebro a consolidar memorias y eliminar toxinas.",
  "üí° El ejercicio aer√≥bico aumenta el tama√±o del hipocampo hasta un 2% anual.",
  "üí° Aprender cosas nuevas crea nuevas conexiones sin√°pticas en tu cerebro.",
  "üí° La socializaci√≥n activa m√∫ltiples √°reas cerebrales simult√°neamente.",
  "üí° La dieta mediterr√°nea se asocia con mejor salud cerebral a largo plazo.",
  "üí° Meditar regularmente puede aumentar la materia gris del cerebro.",
  "üí° El cerebro usa el 20% de la energ√≠a del cuerpo, aunque solo pesa el 2%.",
  "üí° Cada neurona puede conectarse con hasta 10,000 otras neuronas.",
  "üí° El estr√©s cr√≥nico puede reducir el tama√±o del hipocampo."
];

// ===== NAVIGATION =====
function showPage(page) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.nav-links button').forEach(b => b.classList.remove('active'));
  document.getElementById('page-' + page).classList.add('active');
  document.getElementById('nav-' + page).classList.add('active');
  if (page === 'progress') updateProgressPage();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

function backToMenu() {
  document.querySelectorAll('.game-area').forEach(g => g.classList.remove('active'));
  document.getElementById('games-menu').style.display = 'block';
  clearInterval(memoryTimer);
}

function updateStats() {
  document.getElementById('stat-games').textContent = state.totalGames;
  document.getElementById('stat-score').textContent = state.totalScore;
  document.getElementById('stat-streak').textContent = state.streak;
  document.getElementById('stat-best').textContent = state.bestScore;
}

function showResult(title, score, msg, gameName, replayFn) {
  const modal = document.getElementById('result-modal');
  const icon = document.getElementById('modal-icon');
  document.getElementById('modal-title').textContent = title;
  document.getElementById('modal-score').textContent = score + ' pts';
  document.getElementById('modal-msg').textContent = msg;
  document.getElementById('modal-brain-tip').textContent = brainTips[Math.floor(Math.random() * brainTips.length)];

  icon.className = 'result-icon ' + (score > 0 ? 'success' : 'try-again');
  icon.textContent = score > 0 ? 'üéâ' : 'üí™';

  document.getElementById('modal-replay-btn').onclick = () => { closeModal(); replayFn(); };
  modal.classList.add('active');

  state.totalGames++;
  state.totalScore += score;
  if (score > state.bestScore) state.bestScore = score;
  if (score > 0) { state.streak++; if (state.streak > state.bestStreak) state.bestStreak = state.streak; }
  else state.streak = 0;

  state.history.unshift({ game: gameName, score, date: new Date().toLocaleTimeString('es') });
  if (state.history.length > 10) state.history.pop();

  updateStats();
}

function closeModal() {
  document.getElementById('result-modal').classList.remove('active');
}

function startGame(game) {
  document.getElementById('games-menu').style.display = 'none';
  document.querySelectorAll('.game-area').forEach(g => g.classList.remove('active'));
  document.getElementById('game-' + game).classList.add('active');

  if (game === 'memory') initMemoryGame();
  if (game === 'pattern') initPatternGame();
  if (game === 'sequence') initSequenceGame();
}

// ===== MEMORY GAME =====
let memoryCards = [];
let memoryFlipped = [];
let memoryMatched = 0;
let memoryMoves = 0;
let memoryTimer;
let memorySeconds = 0;

const emojis = ['üß†', 'üéØ', '‚≠ê', 'üåü', 'üîÆ', 'üíé', 'ü¶ã', 'üå∫'];

function initMemoryGame() {
  memoryFlipped = [];
  memoryMatched = 0;
  memoryMoves = 0;
  memorySeconds = 0;
  clearInterval(memoryTimer);

  const pairs = [...emojis, ...emojis];
  memoryCards = pairs.sort(() => Math.random() - 0.5);

  const grid = document.getElementById('memory-grid');
  grid.innerHTML = '';

  memoryCards.forEach((emoji, i) => {
    const card = document.createElement('div');
    card.className = 'memory-card';
    card.innerHTML = `<div class="card-back">?</div><div class="card-front" style="display:none;align-items:center;justify-content:center;">${emoji}</div>`;
    card.onclick = () => flipCard(i, card);
    grid.appendChild(card);
  });

  document.getElementById('memory-moves').textContent = '0';
  document.getElementById('memory-pairs').textContent = '0/8';
  document.getElementById('memory-time').textContent = '0:00';

  memoryTimer = setInterval(() => {
    memorySeconds++;
    const m = Math.floor(memorySeconds / 60);
    const s = memorySeconds % 60;
    document.getElementById('memory-time').textContent = `${m}:${s.toString().padStart(2, '0')}`;
  }, 1000);
}

function flipCard(index, card) {
  if (memoryFlipped.length >= 2 || card.classList.contains('flipped') || card.classList.contains('matched')) return;

  card.classList.add('flipped');
  card.querySelector('.card-front').style.display = 'flex';
  memoryFlipped.push({ index, card });

  if (memoryFlipped.length === 2) {
    memoryMoves++;
    document.getElementById('memory-moves').textContent = memoryMoves;

    const [a, b] = memoryFlipped;
    if (memoryCards[a.index] === memoryCards[b.index]) {
      setTimeout(() => {
        a.card.classList.add('matched');
        b.card.classList.add('matched');
        memoryMatched++;
        document.getElementById('memory-pairs').textContent = `${memoryMatched}/8`;
        memoryFlipped = [];

        if (memoryMatched === 8) {
          clearInterval(memoryTimer);
          const score = Math.max(10, 200 - memoryMoves * 5 - memorySeconds * 2);
          if (score > state.memoryBest) state.memoryBest = score;
          setTimeout(() => {
            showResult(
              '¬°Memoria completada!',
              score,
              `Encontraste todos los pares en ${memoryMoves} movimientos y ${memorySeconds} segundos.`,
              'Pares de Memoria',
              () => startGame('memory')
            );
          }, 500);
        }
      }, 300);
    } else {
      setTimeout(() => {
        a.card.classList.remove('flipped');
        b.card.classList.remove('flipped');
        a.card.querySelector('.card-front').style.display = 'none';
        b.card.querySelector('.card-front').style.display = 'none';
        memoryFlipped = [];
      }, 800);
    }
  }
}

// ===== PATTERN GAME =====
let patternLevel = 1;
let patternSequence = [];
let patternPlayerSeq = [];
let patternScore = 0;
let patternPhase = 'idle'; // idle, showing, input

function initPatternGame() {
  patternLevel = 1;
  patternScore = 0;
  patternPhase = 'idle';
  document.getElementById('pattern-level').textContent = '1';
  document.getElementById('pattern-score').textContent = '0';
  document.getElementById('pattern-msg').textContent = 'Presiona "Iniciar" para comenzar';
  document.getElementById('pattern-start-btn').style.display = 'inline-block';
  clearPatternGrid();

  document.querySelectorAll('.pattern-cell').forEach(cell => {
    cell.onclick = () => patternPlayerClick(parseInt(cell.dataset.idx));
  });
}

function clearPatternGrid() {
  document.querySelectorAll('.pattern-cell').forEach(c => {
    c.className = 'pattern-cell';
  });
}

function startPatternRound() {
  document.getElementById('pattern-start-btn').style.display = 'none';
  patternPhase = 'showing';
  patternPlayerSeq = [];
  clearPatternGrid();

  const numCells = Math.min(2 + patternLevel, 9);
  patternSequence = [];
  const available = [0,1,2,3,4,5,6,7,8];
  for (let i = 0; i < numCells; i++) {
    const idx = Math.floor(Math.random() * available.length);
    patternSequence.push(available.splice(idx, 1)[0]);
  }

  document.getElementById('pattern-msg').textContent = '¬°Observa el patr√≥n!';

  let delay = 0;
  patternSequence.forEach((cellIdx, i) => {
    setTimeout(() => {
      const cell = document.querySelector(`.pattern-cell[data-idx="${cellIdx}"]`);
      cell.classList.add('active');
    }, delay);

    setTimeout(() => {
      const cell = document.querySelector(`.pattern-cell[data-idx="${cellIdx}"]`);
      cell.classList.remove('active');
    }, delay + 600);

    delay += 800;
  });

  setTimeout(() => {
    patternPhase = 'input';
    document.getElementById('pattern-msg').textContent = `¬°Tu turno! Reproduce el patr√≥n (${patternSequence.length} celdas)`;
  }, delay + 300);
}

function patternPlayerClick(idx) {
  if (patternPhase !== 'input') return;

  const cell = document.querySelector(`.pattern-cell[data-idx="${idx}"]`);
  const expected = patternSequence[patternPlayerSeq.length];

  if (idx === expected) {
    cell.classList.add('correct');
    patternPlayerSeq.push(idx);
    setTimeout(() => cell.classList.remove('correct'), 300);

    if (patternPlayerSeq.length === patternSequence.length) {
      patternPhase = 'idle';
      patternLevel++;
      const roundScore = patternLevel * 15;
      patternScore += roundScore;
      document.getElementById('pattern-level').textContent = patternLevel;
      document.getElementById('pattern-score').textContent = patternScore;

      if (patternLevel > 7) {
        if (patternScore > state.patternBest) state.patternBest = patternScore;
        showResult(
          '¬°Patr√≥n maestro!',
          patternScore,
          `Completaste ${patternLevel - 1} niveles de patrones espaciales.`,
          'Patr√≥n Espacial',
          () => startGame('pattern')
        );
      } else {
        document.getElementById('pattern-msg').textContent = `¬°Correcto! +${roundScore} pts ‚Äî Preparando nivel ${patternLevel}...`;
        setTimeout(startPatternRound, 1500);
      }
    }
  } else {
    cell.classList.add('wrong');
    patternPhase = 'idle';
    setTimeout(() => {
      cell.classList.remove('wrong');
      if (patternScore > state.patternBest) state.patternBest = patternScore;
      showResult(
        patternScore > 0 ? '¬°Buen intento!' : '¬°Sigue practicando!',
        patternScore,
        `Llegaste al nivel ${patternLevel} en patrones espaciales.`,
        'Patr√≥n Espacial',
        () => startGame('pattern')
      );
    }, 600);
  }
}

// ===== SEQUENCE GAME =====
let seqSequence = [];
let seqPlayerIdx = 0;
let seqRound = 0;
let seqScore = 0;
let seqPhase = 'idle';
const seqColors = ['red', 'blue', 'green', 'yellow'];

function initSequenceGame() {
  seqSequence = [];
  seqPlayerIdx = 0;
  seqRound = 0;
  seqScore = 0;
  seqPhase = 'idle';
  document.getElementById('seq-round').textContent = '0';
  document.getElementById('seq-score').textContent = '0';
  document.getElementById('seq-msg').textContent = 'Presiona "Iniciar" para comenzar';
  document.getElementById('seq-start-btn').style.display = 'inline-block';
}

function startSequenceGame() {
  document.getElementById('seq-start-btn').style.display = 'none';
  seqSequence = [];
  seqRound = 0;
  seqScore = 0;
  addToSequence();
}

function addToSequence() {
  seqRound++;
  seqPhase = 'showing';
  document.getElementById('seq-round').textContent = seqRound;
  document.getElementById('seq-msg').textContent = '¬°Observa la secuencia!';

  seqSequence.push(seqColors[Math.floor(Math.random() * 4)]);
  seqPlayerIdx = 0;

  let delay = 500;
  seqSequence.forEach((color, i) => {
    setTimeout(() => lightUp(color), delay);
    delay += 700;
  });

  setTimeout(() => {
    seqPhase = 'input';
    document.getElementById('seq-msg').textContent = '¬°Tu turno! Repite la secuencia';
  }, delay + 200);
}

function lightUp(color) {
  const btn = document.querySelector(`.seq-color-btn.seq-${color}`);
  btn.classList.add('lit');
  setTimeout(() => btn.classList.remove('lit'), 400);
}

function seqPlayerInput(color) {
  if (seqPhase !== 'input') return;

  lightUp(color);

  if (color === seqSequence[seqPlayerIdx]) {
    seqPlayerIdx++;
    if (seqPlayerIdx === seqSequence.length) {
      seqScore += seqRound * 10;
      document.getElementById('seq-score').textContent = seqScore;

      if (seqRound >= 10) {
        seqPhase = 'idle';
        if (seqScore > state.sequenceBest) state.sequenceBest = seqScore;
        showResult(
          '¬°Secuencia perfecta!',
          seqScore,
          `Completaste ${seqRound} rondas de secuencia de colores.`,
          'Secuencia de Colores',
          () => startGame('sequence')
        );
      } else {
        seqPhase = 'waiting';
        document.getElementById('seq-msg').textContent = `¬°Correcto! +${seqRound * 10} pts`;
        setTimeout(addToSequence, 1200);
      }
    }
  } else {
    seqPhase = 'idle';
    if (seqScore > state.sequenceBest) state.sequenceBest = seqScore;
    showResult(
      seqScore > 0 ? '¬°Buen intento!' : '¬°Sigue practicando!',
      seqScore,
      `Llegaste a la ronda ${seqRound} en secuencia de colores.`,
      'Secuencia de Colores',
      () => startGame('sequence')
    );
  }
}

// ===== PROGRESS PAGE =====
function updateProgressPage() {
  document.getElementById('prog-total-games').textContent = state.totalGames;
  document.getElementById('prog-total-points').textContent = state.totalScore;
  document.getElementById('prog-best-streak').textContent = state.bestStreak;

  let level = 'Principiante';
  if (state.totalScore >= 1000) level = 'Experto üèÜ';
  else if (state.totalScore >= 500) level = 'Avanzado ‚≠ê';
  else if (state.totalScore >= 200) level = 'Intermedio üåü';
  else if (state.totalScore >= 50) level = 'Aprendiz üìö';
  document.getElementById('prog-brain-level').textContent = level;

  const maxMem = Math.max(state.memoryBest, 1);
  const maxPat = Math.max(state.patternBest, 1);
  const maxSeq = Math.max(state.sequenceBest, 1);
  const memPct = Math.min(Math.round((state.memoryBest / 200) * 100), 100);
  const patPct = Math.min(Math.round((state.patternBest / 150) * 100), 100);
  const seqPct = Math.min(Math.round((state.sequenceBest / 300) * 100), 100);

  document.getElementById('prog-mem-bar').style.width = memPct + '%';
  document.getElementById('prog-mem-pct').textContent = memPct + '%';
  document.getElementById('prog-pat-bar').style.width = patPct + '%';
  document.getElementById('prog-pat-pct').textContent = patPct + '%';
  document.getElementById('prog-seq-bar').style.width = seqPct + '%';
  document.getElementById('prog-seq-pct').textContent = seqPct + '%';

  const histEl = document.getElementById('history-list');
  if (state.history.length === 0) {
    histEl.innerHTML = '<p style="color:var(--text-secondary);">Juega algunos juegos para ver tu historial aqu√≠</p>';
  } else {
    histEl.innerHTML = state.history.map(h => `
      <div style="display:flex; justify-content:space-between; align-items:center; padding:10px 16px; background:var(--bg-dark); border-radius:12px; margin-bottom:8px;">
        <span>${h.game}</span>
        <span style="color:var(--primary); font-weight:600;">${h.score} pts</span>
        <span style="color:var(--text-secondary); font-size:0.8rem;">${h.date}</span>
      </div>
    `).join('');
  }
}

// Init
updateStats();
</script>
</body>
</html>
